<!--
Copyright 2017 Next Century Corporation

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../zoomable-bar-chart.html">
  </head>
  <body>

    <test-fixture id="zoomable-bar-chart-fixture">
      <template>
        <zoomable-bar-chart>
        </zoomable-bar-chart>
      </template>
    </test-fixture>

    <script>
      suite('<zoomable-bar-chart>', function() {
        var element;

        setup(function(done) {
          element = fixture('zoomable-bar-chart-fixture');
          element.load = true;
          element.data = [{
            bar: 'July 01, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }];
          flush(done);
        });

        test('data should equal array input', function() {
          expect(element.data).to.be.deep.equal([{
            bar: 'July 01, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }]);
        });

        test('_bars is correct', function() {
          expect(element._bars).to.be.an('array');
          expect(element._bars.length).to.equal(1);
          expect(element._bars[0]).to.be.an('object');
          expect(element._bars[0].stacks).to.be.deep.equal([{
            barCount: 6,
            barLabel: 'July 01, 2016',
            barValue: 'July 01, 2016',
            stackLabel: 'Houston, TX, USA',
            stackStart: 0,
            stackEnd: 4
          }, {
            barCount: 6,
            barLabel: 'July 01, 2016',
            barValue: 'July 01, 2016',
            stackLabel: 'Other',
            stackStart: 4,
            stackEnd: 6
          }]);
          expect(element._bars[0].barValue).to.equal('July 01, 2016');
          expect(element._bars[0].barLabel).to.equal('July 01, 2016');
          expect(element._bars[0].barCount).to.equal(6);
        });

        test('_legend is correct', function() {
          expect(element._legend).to.be.deep.equal(['Houston, TX, USA', 'Other']);
        });

        test('svg is not empty', function() {
          expect(element.$$('svg').innerHTML).to.not.equal('');
        });

        test('displayFilterText is correct', function() {
          expect(element.displayFilterText).to.be.false;
        });

        test('_getD3Interval returns correct results', function() {
          expect(element._getD3Interval('hour')).to.deep.equal(d3.time.hour);
          expect(element._getD3Interval('day')).to.deep.equal(d3.time.day);
          expect(element._getD3Interval('week')).to.deep.equal(d3.time.monday);
          expect(element._getD3Interval('month')).to.deep.equal(d3.time.month);
          expect(element._getD3Interval('year')).to.deep.equal(d3.time.year);
        });

        test('_getDateText returns correct results', function() {
          expect(element._getDateText(new Date('Jan 1 2016'), 'hour')).to.equal('05:00:00 Jan 1, 2016');
          expect(element._getDateText(new Date('Jan 1 2016'), 'day')).to.equal('Jan 1, 2016');
          expect(element._getDateText(new Date('Jan 1 2016'), 'week')).to.equal('Week of Jan 1, 2016');
          expect(element._getDateText(new Date('Jan 1 2016'), 'month')).to.equal('Month of Jan 2016');
          expect(element._getDateText(new Date('Jan 1 2016'), 'year')).to.equal('Year of 2016');
        });

        test('_getDomain returns correct results', function() {
          expect(element._getDomain([{
            barValue: 'one',
          }, {
            barValue: 'two'
          }], false)).to.deep.equal(['one', 'two']);
          expect(element._getDomain([{
            barValue: new Date('Jan 1 2016'),
          }, {
            barValue: new Date('Jan 31 2016')
          }], false)).to.deep.equal([new Date('Jan 1 2016'), new Date('Jan 31 2016')]);

          // timeline
          var domain = element._getDomain([{
            barValue: new Date('Jan 1 2016'),
          }, {
            barValue: new Date('Jan 31 2016')
          }], true, 'day', 100);
          expect(domain.length).to.equal(31);
          expect(domain[0]).to.deep.equal(new Date('Jan 1 2016'));
          expect(domain[30]).to.deep.equal(new Date('Jan 31 2016'));
        });

        test('_getDomainTimeFormat returns correct results', function() {
          expect(element._getDomainTimeFormat([new Date('Jan 1 2016'), new Date('Jan 2 2016')])).to.equal('%b %e');
          expect(element._getDomainTimeFormat([new Date('Jan 31 2016'), new Date('Jan 1 2017')])).to.equal('%b %e %Y');
          expect(element._getDomainTimeFormat([new Date('Jan 1 2016'), new Date('Jan 2 2016')], 'week')).to.equal('%b %e');
          expect(element._getDomainTimeFormat([new Date('Jan 31 2016'), new Date('Jan 1 2017')], 'week')).to.equal('%b %e %Y');
          expect(element._getDomainTimeFormat([new Date('Jan 1 2016'), new Date('Jan 2 2016')], 'month')).to.equal('%b');
          expect(element._getDomainTimeFormat([new Date('Jan 31 2016'), new Date('Jan 1 2017')], 'month')).to.equal('%b %Y');
          expect(element._getDomainTimeFormat([new Date('Jan 1 2016'), new Date('Jan 2 2016')], 'year')).to.equal('%Y');
          expect(element._getDomainTimeFormat([new Date('Jan 31 2016'), new Date('Jan 1 2017')], 'year')).to.equal('%Y');
        });

        test('_getNumberedAxisTickValues returns correct results for min=0', function() {
          expect(element._getNumberedAxisTickValues(0, 0, 200)).to.deep.equal([0]);
          expect(element._getNumberedAxisTickValues(0, 1, 200)).to.deep.equal([0, 1]);
          expect(element._getNumberedAxisTickValues(0, 9, 200)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]);
          expect(element._getNumberedAxisTickValues(0, 10, 200)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
          expect(element._getNumberedAxisTickValues(0, 11, 200)).to.deep.equal([0, 2, 4, 6, 8, 10, 12]);
          expect(element._getNumberedAxisTickValues(0, 19, 200)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]);
          expect(element._getNumberedAxisTickValues(0, 20, 200)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]);
          expect(element._getNumberedAxisTickValues(0, 21, 200)).to.deep.equal([0, 5, 10, 15, 20, 25]);
          expect(element._getNumberedAxisTickValues(0, 49, 200)).to.deep.equal([0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]);
          expect(element._getNumberedAxisTickValues(0, 50, 200)).to.deep.equal([0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]);
          expect(element._getNumberedAxisTickValues(0, 51, 200)).to.deep.equal([0, 10, 20, 30, 40, 50, 60]);
          expect(element._getNumberedAxisTickValues(0, 99, 200)).to.deep.equal([0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]);
          expect(element._getNumberedAxisTickValues(0, 100, 200)).to.deep.equal([0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]);
          expect(element._getNumberedAxisTickValues(0, 101, 200)).to.deep.equal([0, 20, 40, 60, 80, 100, 120]);
          expect(element._getNumberedAxisTickValues(0, 199, 200)).to.deep.equal([0, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200]);
          expect(element._getNumberedAxisTickValues(0, 200, 200)).to.deep.equal([0, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200]);
          expect(element._getNumberedAxisTickValues(0, 201, 200)).to.deep.equal([0, 50, 100, 150, 200, 250]);
          expect(element._getNumberedAxisTickValues(0, 499, 200)).to.deep.equal([0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500]);
          expect(element._getNumberedAxisTickValues(0, 500, 200)).to.deep.equal([0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500]);
          expect(element._getNumberedAxisTickValues(0, 501, 200)).to.deep.equal([0, 100, 200, 300, 400, 500, 600]);
        });

        test('_getNumberedAxisTickValues returns correct results for min>0', function() {
          expect(element._getNumberedAxisTickValues(1, 10, 200)).to.deep.equal([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
          expect(element._getNumberedAxisTickValues(1, 20, 200)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]);
          expect(element._getNumberedAxisTickValues(11, 20, 200)).to.deep.equal([11, 12, 13, 14, 15, 16, 17, 18, 19, 20]);
          expect(element._getNumberedAxisTickValues(1, 50, 200)).to.deep.equal([0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]);
          expect(element._getNumberedAxisTickValues(31, 50, 200)).to.deep.equal([30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50]);
          expect(element._getNumberedAxisTickValues(41, 50, 200)).to.deep.equal([41, 42, 43, 44, 45, 46, 47, 48, 49, 50]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=0', function() {
          expect(element._getNumberedAxisTickValues(0, 10, 0)).to.deep.equal([0, 10]);
          expect(element._getNumberedAxisTickValues(5, 20, 0)).to.deep.equal([5, 20]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=20', function() {
          expect(element._getNumberedAxisTickValues(0, 10, 20)).to.deep.equal([0, 10]);
          expect(element._getNumberedAxisTickValues(5, 20, 20)).to.deep.equal([5, 20]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=40', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 40)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 40)).to.deep.equal([0, 2, 4]);
          expect(element._getNumberedAxisTickValues(0, 4, 40)).to.deep.equal([0, 2, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 40)).to.deep.equal([0, 3, 6]);
          expect(element._getNumberedAxisTickValues(0, 6, 40)).to.deep.equal([0, 3, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 40)).to.deep.equal([0, 4, 8]);
          expect(element._getNumberedAxisTickValues(0, 8, 40)).to.deep.equal([0, 4, 8]);
          expect(element._getNumberedAxisTickValues(0, 9, 40)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 10, 40)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 15, 40)).to.deep.equal([0, 8, 16]);
          expect(element._getNumberedAxisTickValues(2, 12, 40)).to.deep.equal([2, 7, 12]);
          expect(element._getNumberedAxisTickValues(5, 90, 40)).to.deep.equal([5, 48, 91]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=60', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 60)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 60)).to.deep.equal([0, 1, 2, 3]);
          expect(element._getNumberedAxisTickValues(0, 4, 60)).to.deep.equal([0, 2, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 60)).to.deep.equal([0, 2, 4, 6]);
          expect(element._getNumberedAxisTickValues(0, 6, 60)).to.deep.equal([0, 2, 4, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 60)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 8, 60)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 9, 60)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 10, 60)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 12, 60)).to.deep.equal([0, 5, 10, 15]);
          expect(element._getNumberedAxisTickValues(0, 14, 60)).to.deep.equal([0, 5, 10, 15]);
          expect(element._getNumberedAxisTickValues(0, 16, 60)).to.deep.equal([0, 10, 20]);
          expect(element._getNumberedAxisTickValues(0, 18, 60)).to.deep.equal([0, 10, 20]);
          expect(element._getNumberedAxisTickValues(0, 20, 60)).to.deep.equal([0, 10, 20]);
          expect(element._getNumberedAxisTickValues(0, 22, 60)).to.deep.equal([0, 10, 20, 30]);
          expect(element._getNumberedAxisTickValues(0, 24, 60)).to.deep.equal([0, 10, 20, 30]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=80', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 80)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 80)).to.deep.equal([0, 1, 2, 3]);
          expect(element._getNumberedAxisTickValues(0, 4, 80)).to.deep.equal([0, 1, 2, 3, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 80)).to.deep.equal([0, 2, 4, 6]);
          expect(element._getNumberedAxisTickValues(0, 6, 80)).to.deep.equal([0, 2, 4, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 80)).to.deep.equal([0, 2, 4, 6, 8]);
          expect(element._getNumberedAxisTickValues(0, 8, 80)).to.deep.equal([0, 2, 4, 6, 8]);
          expect(element._getNumberedAxisTickValues(0, 9, 80)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 10, 80)).to.deep.equal([0, 5, 10]);
          expect(element._getNumberedAxisTickValues(0, 12, 80)).to.deep.equal([0, 5, 10, 15]);
          expect(element._getNumberedAxisTickValues(0, 14, 80)).to.deep.equal([0, 5, 10, 15]);
          expect(element._getNumberedAxisTickValues(0, 16, 80)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 18, 80)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 20, 80)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 22, 80)).to.deep.equal([0, 10, 20, 30]);
          expect(element._getNumberedAxisTickValues(0, 24, 80)).to.deep.equal([0, 10, 20, 30]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=100', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 100)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 100)).to.deep.equal([0, 1, 2, 3]);
          expect(element._getNumberedAxisTickValues(0, 4, 100)).to.deep.equal([0, 1, 2, 3, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 100)).to.deep.equal([0, 1, 2, 3, 4, 5]);
          expect(element._getNumberedAxisTickValues(0, 6, 100)).to.deep.equal([0, 2, 4, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 100)).to.deep.equal([0, 2, 4, 6, 8]);
          expect(element._getNumberedAxisTickValues(0, 8, 100)).to.deep.equal([0, 2, 4, 6, 8]);
          expect(element._getNumberedAxisTickValues(0, 9, 100)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 10, 100)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 12, 100)).to.deep.equal([0, 5, 10, 15]);
          expect(element._getNumberedAxisTickValues(0, 14, 100)).to.deep.equal([0, 5, 10, 15]);
          expect(element._getNumberedAxisTickValues(0, 16, 100)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 18, 100)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 20, 100)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 22, 100)).to.deep.equal([0, 5, 10, 15, 20, 25]);
          expect(element._getNumberedAxisTickValues(0, 24, 100)).to.deep.equal([0, 5, 10, 15, 20, 25]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=120', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 120)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 120)).to.deep.equal([0, 1, 2, 3]);
          expect(element._getNumberedAxisTickValues(0, 4, 120)).to.deep.equal([0, 1, 2, 3, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 120)).to.deep.equal([0, 1, 2, 3, 4, 5]);
          expect(element._getNumberedAxisTickValues(0, 6, 120)).to.deep.equal([0, 1, 2, 3, 4, 5, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 120)).to.deep.equal([0, 2, 4, 6, 8]);
          expect(element._getNumberedAxisTickValues(0, 8, 120)).to.deep.equal([0, 2, 4, 6, 8]);
          expect(element._getNumberedAxisTickValues(0, 9, 120)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 10, 120)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 12, 120)).to.deep.equal([0, 2, 4, 6, 8, 10, 12]);
          expect(element._getNumberedAxisTickValues(0, 14, 120)).to.deep.equal([0, 5, 10, 15]);
          expect(element._getNumberedAxisTickValues(0, 16, 120)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 18, 120)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 20, 120)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 22, 120)).to.deep.equal([0, 5, 10, 15, 20, 25]);
          expect(element._getNumberedAxisTickValues(0, 24, 120)).to.deep.equal([0, 5, 10, 15, 20, 25]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=140', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 140)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 140)).to.deep.equal([0, 1, 2, 3]);
          expect(element._getNumberedAxisTickValues(0, 4, 140)).to.deep.equal([0, 1, 2, 3, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 140)).to.deep.equal([0, 1, 2, 3, 4, 5]);
          expect(element._getNumberedAxisTickValues(0, 6, 140)).to.deep.equal([0, 1, 2, 3, 4, 5, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 140)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7]);
          expect(element._getNumberedAxisTickValues(0, 8, 140)).to.deep.equal([0, 2, 4, 6, 8]);
          expect(element._getNumberedAxisTickValues(0, 9, 140)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 10, 140)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 12, 140)).to.deep.equal([0, 2, 4, 6, 8, 10, 12]);
          expect(element._getNumberedAxisTickValues(0, 14, 140)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14]);
          expect(element._getNumberedAxisTickValues(0, 16, 140)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 18, 140)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 20, 140)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 22, 140)).to.deep.equal([0, 5, 10, 15, 20, 25]);
          expect(element._getNumberedAxisTickValues(0, 24, 140)).to.deep.equal([0, 5, 10, 15, 20, 25]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=160', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 160)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 160)).to.deep.equal([0, 1, 2, 3]);
          expect(element._getNumberedAxisTickValues(0, 4, 160)).to.deep.equal([0, 1, 2, 3, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 160)).to.deep.equal([0, 1, 2, 3, 4, 5]);
          expect(element._getNumberedAxisTickValues(0, 6, 160)).to.deep.equal([0, 1, 2, 3, 4, 5, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 160)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7]);
          expect(element._getNumberedAxisTickValues(0, 8, 160)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7, 8]);
          expect(element._getNumberedAxisTickValues(0, 9, 160)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 10, 160)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 12, 160)).to.deep.equal([0, 2, 4, 6, 8, 10, 12]);
          expect(element._getNumberedAxisTickValues(0, 14, 160)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14]);
          expect(element._getNumberedAxisTickValues(0, 16, 160)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14, 16]);
          expect(element._getNumberedAxisTickValues(0, 18, 160)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 20, 160)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 22, 160)).to.deep.equal([0, 5, 10, 15, 20, 25]);
          expect(element._getNumberedAxisTickValues(0, 24, 160)).to.deep.equal([0, 5, 10, 15, 20, 25]);
        });

        test('_getNumberedAxisTickValues returns correct results for height=180', function() {
          expect(element._getNumberedAxisTickValues(0, 2, 180)).to.deep.equal([0, 1, 2]);
          expect(element._getNumberedAxisTickValues(0, 3, 180)).to.deep.equal([0, 1, 2, 3]);
          expect(element._getNumberedAxisTickValues(0, 4, 180)).to.deep.equal([0, 1, 2, 3, 4]);
          expect(element._getNumberedAxisTickValues(0, 5, 180)).to.deep.equal([0, 1, 2, 3, 4, 5]);
          expect(element._getNumberedAxisTickValues(0, 6, 180)).to.deep.equal([0, 1, 2, 3, 4, 5, 6]);
          expect(element._getNumberedAxisTickValues(0, 7, 180)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7]);
          expect(element._getNumberedAxisTickValues(0, 8, 180)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7, 8]);
          expect(element._getNumberedAxisTickValues(0, 9, 180)).to.deep.equal([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]);
          expect(element._getNumberedAxisTickValues(0, 10, 180)).to.deep.equal([0, 2, 4, 6, 8, 10]);
          expect(element._getNumberedAxisTickValues(0, 12, 180)).to.deep.equal([0, 2, 4, 6, 8, 10, 12]);
          expect(element._getNumberedAxisTickValues(0, 14, 180)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14]);
          expect(element._getNumberedAxisTickValues(0, 16, 180)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14, 16]);
          expect(element._getNumberedAxisTickValues(0, 18, 180)).to.deep.equal([0, 2, 4, 6, 8, 10, 12, 14, 16, 18]);
          expect(element._getNumberedAxisTickValues(0, 20, 180)).to.deep.equal([0, 5, 10, 15, 20]);
          expect(element._getNumberedAxisTickValues(0, 22, 180)).to.deep.equal([0, 5, 10, 15, 20, 25]);
          expect(element._getNumberedAxisTickValues(0, 24, 180)).to.deep.equal([0, 5, 10, 15, 20, 25]);
        });

        test('_getTruncatedDomain returns correct results', function() {
          expect(element._getTruncatedDomain(['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'])).to.deep.equal(['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']);
          expect(element._getTruncatedDomain(['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K'])).to.deep.equal(['A', 'C', 'E', 'G', 'I', 'K']);
          expect(element._getTruncatedDomain(['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T'])).to.deep.equal(['A', 'C', 'E', 'G', 'I', 'K', 'M', 'O', 'Q', 'S']);
          expect(element._getTruncatedDomain(['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U'])).to.deep.equal(['A', 'D', 'G', 'J', 'M', 'P', 'S']);
        });

        test('_getSelectionInstructions returns correct results', function() {
          expect(element._getSelectionInstructions()).to.equal('Click + drag on the chart below to zoom.  Click elsewhere to reset the zoom.');

          element.displayFilterText = true;

          expect(element._getSelectionInstructions()).to.equal('Click + drag on the chart below to zoom + filter.  Click elsewhere to reset.');
        });
      });

      suite('<zoomable-bar-chart> with non-default properties', function() {
        var element;

        setup(function(done) {
          element = fixture('zoomable-bar-chart-fixture');
          element.load = true;
          element.barProperty = 'myGroup';
          element.stackProperty = 'myArray';
          element.labelProperty = 'myLabel';
          element.countProperty = 'myCount';
          element.defaultLabel = 'Thing';
          element.data = [{
            myGroup: 'July 01, 2016',
            myArray: [{
              myLabel: 'Houston, TX, USA',
              myCount: 4
            }, {
              myLabel: 'Austin, TX, USA',
              myCount: 0
            }, {
              myCount: 2
            }]
          }];
          flush(done);
        });

        test('data should equal array input', function() {
          expect(element.data).to.be.deep.equal([{
            myGroup: 'July 01, 2016',
            myArray: [{
              myLabel: 'Houston, TX, USA',
              myCount: 4
            }, {
              myLabel: 'Austin, TX, USA',
              myCount: 0
            }, {
              myCount: 2
            }]
          }]);
        });

        test('_bars is correct', function() {
          expect(element._bars).to.be.an('array');
          expect(element._bars.length).to.equal(1);
          expect(element._bars[0]).to.be.an('object');
          expect(element._bars[0].stacks).to.be.deep.equal([{
            barCount: 6,
            barLabel: 'July 01, 2016',
            barValue: 'July 01, 2016',
            stackLabel: 'Houston, TX, USA',
            stackStart: 0,
            stackEnd: 4
          }, {
            barCount: 6,
            barLabel: 'July 01, 2016',
            barValue: 'July 01, 2016',
            stackLabel: 'Thing',
            stackStart: 4,
            stackEnd: 6
          }]);
          expect(element._bars[0].barValue).to.equal('July 01, 2016');
          expect(element._bars[0].barLabel).to.equal('July 01, 2016');
          expect(element._bars[0].barCount).to.equal(6);
        });

        test('_legend is correct', function() {
          expect(element._legend).to.be.deep.equal(['Houston, TX, USA', 'Thing']);
        });

        test('svg is not empty', function() {
          expect(element.$$('svg').innerHTML).to.not.equal('');
        });
      });

      suite('<zoomable-bar-chart> with timeline data', function() {
        var element;

        setup(function(done) {
          element = fixture('zoomable-bar-chart-fixture');
          element.load = true;
          element.interval = 'day';
          element.timeline = true;
          element.data = [{
            bar: 'July 01, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }];
          flush(done);
        });

        test('data should equal array input', function() {
          expect(element.data).to.be.deep.equal([{
            bar: 'July 01, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }]);
        });

        test('_bars is correct', function() {
          expect(element._bars).to.be.an('array');
          expect(element._bars.length).to.equal(1);
          expect(element._bars[0]).to.be.an('object');
          expect(element._bars[0].stacks).to.be.deep.equal([{
            barCount: 6,
            barLabel: 'Jul 1, 2016',
            barValue: new Date('July 01, 2016'),
            stackLabel: 'Houston, TX, USA',
            stackStart: 0,
            stackEnd: 4
          }, {
            barCount: 6,
            barLabel: 'Jul 1, 2016',
            barValue: new Date('July 01, 2016'),
            stackLabel: 'Other',
            stackStart: 4,
            stackEnd: 6
          }]);
          expect(element._bars[0].barValue).to.deep.equal(new Date('July 01, 2016'));
          expect(element._bars[0].barLabel).to.equal('Jul 1, 2016');
          expect(element._bars[0].barCount).to.equal(6);
        });

        test('_legend is correct', function() {
          expect(element._legend).to.be.deep.equal(['Houston, TX, USA', 'Other']);
        });

        test('svg is not empty', function() {
          expect(element.$$('svg').innerHTML).to.not.equal('');
        });
      });

      suite('<zoomable-bar-chart> with weekly timeline data', function() {
        var element;

        setup(function(done) {
          element = fixture('zoomable-bar-chart-fixture');
          element.load = true;
          element.timeline = true;
          element.interval = 'week';
          element.data = [{
            bar: 'Jul 04, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }, {
            bar: 'Jul 11, 2016',
            stack: [{
              label: 'San Antonio, TX, USA',
              count: 5
            }]
          }, {
            bar: 'Jul 25, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 1
            }]
          }];
          flush(done);
        });

        test('data should equal array input', function() {
          expect(element.data).to.be.deep.equal([{
            bar: 'Jul 04, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }, {
            bar: 'Jul 11, 2016',
            stack: [{
              label: 'San Antonio, TX, USA',
              count: 5
            }]
          }, {
            bar: 'Jul 25, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 1
            }]
          }]);
        });

        test('_bars is correct', function() {
          expect(element._bars.length).to.equal(4);

          expect(element._bars[0].barCount).to.equal(6);
          expect(element._bars[0].barLabel).to.equal('Week of Jul 4, 2016');
          expect(element._bars[0].barValue).to.deep.equal(new Date('Jul 4, 2016'));
          expect(element._bars[0].stacks).to.be.deep.equal([{
            barCount: 6,
            barLabel: 'Week of Jul 4, 2016',
            barValue: new Date('Jul 4, 2016'),
            stackLabel: 'Houston, TX, USA',
            stackStart: 0,
            stackEnd: 4
          }, {
            barCount: 6,
            barLabel: 'Week of Jul 4, 2016',
            barValue: new Date('Jul 4, 2016'),
            stackLabel: 'Other',
            stackStart: 4,
            stackEnd: 6
          }]);

          expect(element._bars[1].barCount).to.equal(5);
          expect(element._bars[1].barLabel).to.equal('Week of Jul 11, 2016');
          expect(element._bars[1].barValue).to.deep.equal(new Date('Jul 11, 2016'));
          expect(element._bars[1].stacks).to.be.deep.equal([{
            barCount: 5,
            barLabel: 'Week of Jul 11, 2016',
            barValue: new Date('Jul 11, 2016'),
            stackLabel: 'San Antonio, TX, USA',
            stackStart: 0,
            stackEnd: 5
          }]);

          expect(element._bars[2].barCount).to.equal(0);
          expect(element._bars[2].barLabel).to.equal('Week of Jul 18, 2016');
          expect(element._bars[2].barValue).to.deep.equal(new Date('Jul 18, 2016'));
          expect(element._bars[2].stacks).to.be.deep.equal([]);

          expect(element._bars[3].barCount).to.equal(1);
          expect(element._bars[3].barLabel).to.equal('Week of Jul 25, 2016');
          expect(element._bars[3].barValue).to.deep.equal(new Date('Jul 25, 2016'));
          expect(element._bars[3].stacks).to.be.deep.equal([{
            barCount: 1,
            barLabel: 'Week of Jul 25, 2016',
            barValue: new Date('Jul 25, 2016'),
            stackLabel: 'Houston, TX, USA',
            stackStart: 0,
            stackEnd: 1
          }]);
        });

        test('_legend is correct', function() {
          expect(element._legend).to.be.deep.equal(['Houston, TX, USA', 'Other', 'San Antonio, TX, USA']);
        });

        test('svg is not empty', function() {
          expect(element.$$('svg').innerHTML).to.not.equal('');
        });
      });

      suite('<zoomable-bar-chart> with no data', function() {
        var element;
        setup(function(done) {
          element = fixture('zoomable-bar-chart-fixture');
          element.load = true;
          element.data = [];
          flush(done);
        });

        test('data should equal empty array', function() {
          expect(element.data).to.be.deep.equal([]);
        });

        test('_bars should equal empty array', function() {
          expect(element._bars).to.be.deep.equal([]);
        });

        test('_legend should equal empty array', function() {
          expect(element._legend).to.be.deep.equal([]);
        });

        test('svg is empty', function() {
          expect(element.$$('svg').innerHTML).to.equal('');
        });
      });

      suite('<zoomable-bar-chart> with load=false', function() {
        var element;

        setup(function(done) {
          element = fixture('zoomable-bar-chart-fixture');
          element.data = [{
            bar: 'July 01, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }];
          flush(done);
        });

        test('data should equal array input', function() {
          expect(element.data).to.be.deep.equal([{
            bar: 'July 01, 2016',
            stack: [{
              label: 'Houston, TX, USA',
              count: 4
            }, {
              label: 'Austin, TX, USA',
              count: 0
            }, {
              count: 2
            }]
          }]);
        });

        test('_bars should equal empty array', function() {
          expect(element._bars).to.be.deep.equal([]);
        });

        test('_legend should equal empty array', function() {
          expect(element._legend).to.be.deep.equal([]);
        });

        test('svg is empty', function() {
          expect(element.$$('svg').innerHTML).to.equal('');
        });
      });
    </script>

  </body>
</html>
